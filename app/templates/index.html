<!DOCTYPE html>
<html>
<head>
    <title>URL Shortener</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Shorten Your URL</h1>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="flash">
              {% for msg in messages %}
                <p>{{ msg }}</p>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- URL form -->
        <form method="POST">
            <input type="url" name="original_url" placeholder="Enter your URL here" required><br>

            {% if session.username %}
                <input type="text" name="custom_code" placeholder="Custom short code (optional)">
            {% endif %}

            <button type="submit">Shorten</button>
        </form>

        <!-- Auth Links -->
        <div class="auth-links">
            {% if session.username %}
                <p>
                    Logged in as <strong>{{ session.username }}</strong> |
                    <a href="/dashboard">Dashboard</a> |
                    <a href="/logout">Logout</a>
                </p>
            {% else %}
                <p>
                    <a href="/login">Login</a> or
                    <a href="/signup">Signup</a> to use custom short codes
                </p>
            {% endif %}
        </div>
    </div>
</body>
</html>
